define("kg/detail-viewed-bought-module/6.0.18/index",["node","node","dom","io","util","event","kg/slide/6.0.11/index"],function(e,i,t){var a,n,o,d=e("node"),l=e("node"),r=e("dom"),c=e("io"),m=e("util"),X=e("event"),s=e("kg/slide/6.0.11/index");a=function(e){"use strict";var i=d;return e=i("<style>#detail-recommend-bought,#detail-recommend-viewed{font:12px/1.5 tahoma,arial,'Hiragino Sans GB',sans-serif}#detail-recommend-bought ol,#detail-recommend-bought ul,#detail-recommend-viewed ol,#detail-recommend-viewed ul{list-style:none}#detail-recommend-viewed #viewed-items-slide{height:255px;width:100%;_width:740px;visibility:hidden;overflow:hidden}#detail-recommend-viewed .related-items .price{background:0 0;margin-left:0;padding-left:0;float:none}#detail-recommend-viewed .tab-nav{display:none}#detail-recommend-viewed .related-items .scrollable-panel{width:100%;left:0}#detail-recommend-viewed .related-items{position:relative;margin-left:200px}.expanded #detail-recommend-viewed .related-items{margin-left:0}#detail-recommend-viewed .related-items .desc{min-height:36px;padding-left:0;height:36px;overflow:hidden}#detail-recommend-viewed .related-items .desc a{color:#36c}#detail-recommend-viewed .related-items .item-list{width:100%;margin:0!important;overflow:hidden;display:none;padding:0!important;border:0!important;background:#fff}#detail-recommend-viewed .related-items .item-list li{width:23%!important;float:left;margin:15px 1% 20px!important;*margin-right:.8%!important;_margin-right:0!important;overflow:hidden!important;padding:0!important;border:0!important}#detail-recommend-viewed .related-items .item-list div{display:block!important;text-align:left}#detail-recommend-viewed .related-items .pic{width:160px;height:160px;overflow:hidden;border:1px solid #ccc}#detail-recommend-viewed .related-items .pic img{width:160px}#detail-recommend-viewed h5{font-size:15px;text-align:left;margin-left:10px;_padding:2px 0 0 5px}#detail-recommend-viewed .small-rect{position:absolute;top:3px;left:0;width:5px;height:17px;background-color:#fe7e01;_margin-left:-15px}#detail-recommend-viewed .page_num{font-size:12px;color:#000;font-family:microsoft yahei;position:absolute;top:3px;right:36px}#detail-recommend-viewed .prev{width:16px;height:14px;background:url(//img.alicdn.com/tps/i4/T1DChnFhlcXXaa8kfX-16-28.gif) 0 -14px;position:absolute;top:5px;right:16px;cursor:pointer}#detail-recommend-viewed .next{width:16px;height:14px;background:url(//img.alicdn.com/tps/i1/T1gfdoFiVcXXaa8kfX-16-28.gif) 0 -14px;position:absolute;top:5px;right:0;cursor:pointer}#detail-recommend-viewed .related-items .item-list li .item{width:160px;margin:auto}#detail-recommend-viewed .tuijian-price{overflow:hidden;padding:4px 0;height:15px}#detail-recommend-viewed .yen{font-family:Arial;color:#999;padding-right:3px}#detail-recommend-viewed .tuijian-light{color:#ff2900}#detail-recommend-viewed .old-price .tuijian-grey{color:#999}#detail-recommend-viewed .old-price .price{font-weight:400;text-decoration:line-through}#detail-recommend-bought #bought-items-slide{height:255px;width:100%;_width:740px;visibility:hidden;overflow:hidden}#detail-recommend-bought .related-items .price{background:0 0;margin-left:0;padding-left:0;float:none}#detail-recommend-bought .tab-nav{display:none}#detail-recommend-bought .related-items .scrollable-panel{width:100%;left:0}#detail-recommend-bought .related-items{position:relative;margin-left:200px}.expanded #detail-recommend-bought .related-items{margin-left:0}#detail-recommend-bought .related-items .desc{min-height:36px;padding-left:0;height:36px;overflow:hidden}#detail-recommend-bought .related-items .desc a{color:#36c}#detail-recommend-bought .related-items .item-list{width:100%;margin:0!important;overflow:hidden;padding:0!important;border:0!important;background:#fff;display:none}#detail-recommend-bought .related-items .item-list li{width:23%!important;float:left;margin:15px 1% 20px!important;*margin-right:.8%!important;_margin-right:0!important;overflow:hidden!important;padding:0!important;border:0!important}#detail-recommend-bought .related-items .item-list div{display:block!important;text-align:left}#detail-recommend-bought .related-items .pic{width:160px;height:160px;overflow:hidden;border:1px solid #ccc}#detail-recommend-bought .related-items .pic img{width:160px}#detail-recommend-bought h5{font-size:15px;text-align:left;margin-left:10px;_padding:2px 0 0 5px}#detail-recommend-bought .small-rect{position:absolute;top:3px;left:0;width:5px;height:17px;background-color:#fe7e01;_margin-left:-15px}#detail-recommend-bought .page_num{font-size:12px;color:#000;font-family:microsoft yahei;position:absolute;top:3px;right:36px}#detail-recommend-bought .prev{width:16px;height:14px;background:url(//img.alicdn.com/tps/i4/T1DChnFhlcXXaa8kfX-16-28.gif) 0 -14px;position:absolute;top:5px;right:16px;cursor:pointer}#detail-recommend-bought .next{width:16px;height:14px;background:url(//img.alicdn.com/tps/i1/T1gfdoFiVcXXaa8kfX-16-28.gif) 0 -14px;position:absolute;top:5px;right:0;cursor:pointer}#detail-recommend-bought .related-items .item-list li .item{width:160px;margin:auto}#detail-recommend-bought .tuijian-price{overflow:hidden;padding:4px 0;height:15px}#detail-recommend-bought .yen{font-family:Arial;color:#999;padding-right:3px}#detail-recommend-bought .tuijian-light{color:#ff2900}#detail-recommend-bought .old-price .tuijian-grey{color:#999}#detail-recommend-bought .old-price .price{font-weight:400;text-decoration:line-through}#detail-recommend-bought .icon-1212,#detail-recommend-viewed .icon-1212{display:inline-block;vertical-align:middle;margin-right:4px;height:16px}#detail-recommend-bought .hongbao2015,#detail-recommend-viewed .hongbao2015{float:right;display:inline-block;*display:inline;*zoom:1;*margin-top:-16px;width:16px;height:16px;background-position:0 0;background:url(//img.alicdn.com/tps/TB174bnJFXXXXbHXFXXXXXXXXXX-16-16.png) no-repeat;background-image:-webkit-image-set(url(//img.alicdn.com/tps/TB174bnJFXXXXbHXFXXXXXXXXXX-16-16.png) 1x,url(//img.alicdn.com/tps/TB1VWbwJFXXXXbYXpXXXXXXXXXX-32-32.png) 2x);background-image:-moz-image-set(url(//img.alicdn.com/tps/TB174bnJFXXXXbHXFXXXXXXXXXX-16-16.png) 1x,url(//img.alicdn.com/tps/TB1VWbwJFXXXXbYXpXXXXXXXXXX-32-32.png) 2x);background-image:-ms-image-set(url(//img.alicdn.com/tps/TB174bnJFXXXXbHXFXXXXXXXXXX-16-16.png) 1x,url(//img.alicdn.com/tps/TB1VWbwJFXXXXbYXpXXXXXXXXXX-32-32.png) 2x);background-image:-o-image-set(url(//img.alicdn.com/tps/TB174bnJFXXXXbHXFXXXXXXXXXX-16-16.png) 1x,url(//img.alicdn.com/tps/TB1VWbwJFXXXXbYXpXXXXXXXXXX-32-32.png) 2x)}#detail-recommend-bought .manfan2015,#detail-recommend-viewed .manfan2015{float:right;display:inline-block;*display:inline;*zoom:1;*margin-top:-16px;width:50px;height:16px;background-position:0 0;background:url(//img.alicdn.com/tps/TB1CvOVLXXXXXXJXFXXXXXXXXXX-50-16.png) no-repeat;background-image:-webkit-image-set(url(//img.alicdn.com/tps/TB1CvOVLXXXXXXJXFXXXXXXXXXX-50-16.png) 1x,url(//img.alicdn.com/tps/TB1c45DLXXXXXauaXXXXXXXXXXX-100-32.png) 2x);background-image:-moz-image-set(url(//img.alicdn.com/tps/TB1CvOVLXXXXXXJXFXXXXXXXXXX-50-16.png) 1x,url(//img.alicdn.com/tps/TB1c45DLXXXXXauaXXXXXXXXXXX-100-32.png) 2x);background-image:-ms-image-set(url(//img.alicdn.com/tps/TB1CvOVLXXXXXXJXFXXXXXXXXXX-50-16.png) 1x,url(//img.alicdn.com/tps/TB1c45DLXXXXXauaXXXXXXXXXXX-100-32.png) 2x);background-image:-o-image-set(url(//img.alicdn.com/tps/TB1CvOVLXXXXXXJXFXXXXXXXXXX-50-16.png) 1x,url(//img.alicdn.com/tps/TB1c45DLXXXXXauaXXXXXXXXXXX-100-32.png) 2x)}</style>").appendTo("head")}(),n=function(e){function i(){function e(e){return e.replace(/[<>\"\']/g,function(e){var i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return i[e]})}function i(e){return e>99999999?parseFloat(e/1e8).toFixed(1)+"\u4ebf":e>9999?parseFloat(e/1e4).toFixed(1)+"\u4e07":parseFloat(e).toFixed(2)}function l(e,i){var t,a=!0;for(t=0;t<i.length;t++)e.hasOwnProperty(i[t])||(a=!1);return a}var r,c,m=t,X=function(){this.viewed_appid_daily=19671,this.viewed_appid=9,this.viewed_container=m.one("#detail-recommend-viewed"),this.bought_appid_daily=19673,this.bought_appid=11,this.bought_container=m.one("#detail-recommend-bought"),this.count=12,this.render()};o.augment(X,{render:function(){var t,o,X,s,g,h,u=this,b="https://tui.taobao.com",v=u.viewed_appid,x=u.bought_appid,f=u.viewed_container,w=u.bought_container;location.host.indexOf("daily")>-1&&(b="//tui.daily.taobao.net",v=u.viewed_appid_daily,x=u.bought_appid_daily),location.host.indexOf("dev.wapa")>-1&&(b="//tuipre.taobao.com",v=u.viewed_appid,x=u.bought_appid),f&&w&&(o=f.attr("data-sellerid"),X=f.attr("data-catid"),s=f.attr("data-itemid"),X&&o&&s&&(t=b+"/recommend?appid="+v+"&count="+u.count,t+="&sellerid="+o+"&itemid="+s+"&categoryid="+X,new n({type:"get",dataType:"jsonp",url:t,data:{},success:function(t){var n,o,c,X,h,u,b,v,x,w,y,k="";if(t.result){if(g=t.result,g&&g.length<2)return void m.one("#detail-recommend-viewed").hide();for(a.addStyleSheet("#detail-recommend-viewed .related-items{position:relative}"),X=0;X<g.length;X++)n=g[X],s&&s==n.itemId&&g.splice(X,1);for(o=g.length,c=Math.floor(o/4),o%4!=0&&c++,X=0;X<g.length;X++){if(!l(g[X],["price","promotionPrice","pic","itemName"]))return void m.one("#detail-recommend-viewed").hide();g[X].price=i(g[X].price),g[X].promotionPrice=i(g[X].promotionPrice),g[X].extMap&&g[X].extMap.price20141212&&(g[X].promotionPrice=i(g[X].extMap.price20141212)),""==g[X].pic?g[X].pic="//img.alicdn.com/newshop/nopicture.gif":g[X].pic+="_145x145xz.jpg"}k="<div class='related-items' class='grid'><h5>\u770b\u4e86\u8be5\u5b9d\u8d1d\u7684\u4eba\u8fd8\u770b\u4e86</h5>",k+="<div class='small-rect'></div>",k+="<div class='page_num'>1/"+c+"</div>",k+="<div class='prev'></div>",k+="<div class='next'></div>",k+="<div id='viewed-items-slide'><ul class='tab-nav'></ul><div class='scrollable-panel'>";var T=0;for(h=0;h<c&&h<3;h++){for(k+="<div class='item-list'><ul>",u=4*h,T=0;u<g.length&&T<4;u++,T++){b=g[u],b.itemName=e(b.itemName),b.pic=e(b.pic),b.url=e(b.url),b.promotionPrice=e(b.promotionPrice),b.price=e(b.price);var _="",F="";if(b.extMap&&b.extMap.dacuIcon)switch(b.extMap.dacuIcon){case"taobao":_='<img class="icon-1212" src="//img.alicdn.com/tps/TB170BXOXXXXXbmXVXXXXXXXXXX-32-16.png" alt="">';break;case"jingxuan":_='<img class="icon-1212" src="//img.alicdn.com/tps/TB1gYRtLpXXXXb5XXXXXXXXXXXX-72-16.png" alt="">';break;case"tmall":_='<img class="icon-1212" src="//img.alicdn.com/tps/TB1F3p4OpXXXXXPaFXXXXXXXXXX-32-16.png" alt="">';break;case"yushou":_='<img class="icon-1212" src="//img.alicdn.com/tps/TB1syPJKpXXXXXHapXXXXXXXXXX-118-32.png" alt="">';break;case"hanglv":_='<img class="icon-1212" src="//gw.alicdn.com/tps/TB1_qvxNXXXXXXMaXXXXXXXXXXX-32-16.png" alt="">';break;case"xinshili":_='<img class="icon-1212" src="//img.alicdn.com/tps/TB1lwJ5MFXXXXb8XXXXXXXXXXXX-46-16.png" alt="">';break;default:_=""}if(b.auctionTag){var B=(new Date).getTime();if(15120576e5<=B&&B<15130944e5)switch(b.auctionTag){case"2882":_='<img class="icon-1212" src="//img.alicdn.com/tfs/TB1DcsIblTH8KJjy0FiXXcRsXXa-32-16.png" alt="">'}}b.extMap&&b.extMap.hongbao2015&&(F='<span class="hongbao2015"></span>'),b.extMap&&b.extMap.manfan2015&&(F='<span class="manfan2015"></span>'),_?b.itemName.length>23&&(b.itemName=b.itemName.replace(/^(.{23}).*$/,"$1")):b.itemName.length>26&&(b.itemName=b.itemName.replace(/^(.{26}).*$/,"$1"));var j="",M="",N="";M="",N="<div class='desc'><a class='side-item' target='_blank' href='"+b.url+"' >"+_+b.itemName+"</a></div>",j=0!=b.promotionPrice?'<p class="tuijian-price"><span class="tuijian-light"><b class="yen">&yen;</b><b class="price">'+b.promotionPrice+'</b></span><span class="old-price"><b class="yen">&nbsp;&yen;</b><b class="price">'+b.price+"</b></span>"+F+"</p>":"<p class='tuijian-price tuijian-light'><b class='yen'>&yen;</b><b class='price'>"+b.price+"</b></p>",v="<li><div class='item'><div class='pic'><a class='side-item' target='_blank' href='"+b.url+"'><img title='"+b.itemName+"' src='"+b.pic+"'/></a></div>"+N+j+M+"</div></li>",k+=v}k+="</ul></div>"}k+="</div></div></div>",f.html(k),c<=1&&(m.one(".prev","#detail-recommend-viewed").hide(),m.one(".next","#detail-recommend-viewed").hide(),m.one(".page_num","#detail-recommend-viewed").hide()),x=m.all(".item-list",f),w=m.one("#viewed-items-slide",f),y=x.height(),w.height(y),x.height(y),w.css("visibility","visible"),r=new p("#viewed-items-slide",{contentClass:"scrollable-panel",pannelClass:"item-list",effect:"fade"}),d.on(m.one(".prev","#detail-recommend-viewed"),"click",function(){r.currentTab>0?(r.previous(),m.one(".page_num","#detail-recommend-viewed").text(r.currentTab+1+"/"+c)):(r.go(c-1),m.one(".page_num","#detail-recommend-viewed").text(c+"/"+c))}),d.on(m.one(".next","#detail-recommend-viewed"),"click",function(){r.currentTab<c-1?(r.next(),m.one(".page_num","#detail-recommend-viewed").text(r.currentTab+1+"/"+c)):(r.go(0),m.one(".page_num","#detail-recommend-viewed").text("1/"+c))})}},jsonp:"callback",jsonpCallback:"detail_recommend_viewed"}),t=b+"/recommend?appid="+x+"&count="+u.count,t+="&sellerid="+o+"&itemid="+s+"&categoryid="+X,new n({type:"get",dataType:"jsonp",url:t,data:{},success:function(t){var n,o,r,X,g,u,b,v,x,f,y,k="";if(t.result){if(h=t.result,h&&h.length<2)return void m.one("#detail-recommend-bought").hide();for(a.addStyleSheet("#detail-recommend-bought .related-items{position:relative}"),X=0;X<h.length;X++)n=h[X],s&&s==n.itemId&&h.splice(X,1);for(o=h.length,r=Math.floor(o/4),o%4!=0&&r++,X=0;X<h.length;X++){if(!l(h[X],["price","promotionPrice","pic","itemName"]))return void m.one("#detail-recommend-bought").hide();h[X].price=i(h[X].price),h[X].promotionPrice=i(h[X].promotionPrice),h[X].extMap&&h[X].extMap.price20141212&&(h[X].promotionPrice=i(h[X].extMap.price20141212)),""==h[X].pic?h[X].pic="//img.alicdn.com/newshop/nopicture.gif":h[X].pic+="_145x145xz.jpg"}for(k="<div class='related-items' class='grid'><h5>\u4e70\u4e86\u8be5\u5b9d\u8d1d\u7684\u4eba\u8fd8\u4e70\u4e86</h5>",k+="<div class='small-rect'></div>",k+="<div class='page_num'>1/"+r+"</div>",k+="<div class='prev'></div>",k+="<div class='next'></div>",k+="<div id='bought-items-slide'><ul class='tab-nav'></ul><div class='scrollable-panel'>",g=0;g<r&&g<3;g++){k+="<div class='item-list'><ul>";var T=0;for(u=4*g,T=0;u<h.length&&T<4;u++,T++){b=h[u],b.itemName=e(b.itemName),b.pic=e(b.pic),b.url=e(b.url),b.promotionPrice=e(b.promotionPrice),b.price=e(b.price);var _="",F="",B="",j="",M="";if(b.extMap&&b.extMap.dacuIcon)switch(b.extMap.dacuIcon){case"taobao":j='<img class="icon-1212" src="//img.alicdn.com/tps/TB170BXOXXXXXbmXVXXXXXXXXXX-32-16.png" alt="">';break;case"jingxuan":j='<img class="icon-1212" src="//img.alicdn.com/tps/TB1gYRtLpXXXXb5XXXXXXXXXXXX-72-16.png" alt="">';break;case"tmall":j='<img class="icon-1212" src="//img.alicdn.com/tps/TB1F3p4OpXXXXXPaFXXXXXXXXXX-32-16.png" alt="">';break;case"yushou":j='<img class="icon-1212" src="//img.alicdn.com/tps/TB1syPJKpXXXXXHapXXXXXXXXXX-118-32.png" alt="">';break;case"hanglv":j='<img class="icon-1212" src="//gw.alicdn.com/tps/TB1_qvxNXXXXXXMaXXXXXXXXXXX-32-16.png" alt="">';break;case"xinshili":j='<img class="icon-1212" src="//img.alicdn.com/tps/TB1lwJ5MFXXXXb8XXXXXXXXXXXX-46-16.png" alt="">';break;default:j=""}if(b.extMap&&b.extMap.hongbao2015&&(M='<span class="hongbao2015"></span>'),b.extMap&&b.extMap.manfan2015&&(M='<span class="manfan2015"></span>'),b.auctionTag){var N=(new Date).getTime();if(15120576e5<=N&&N<15130944e5)switch(b.auctionTag){case"2882":j='<img class="icon-1212" src="//img.alicdn.com/tfs/TB1DcsIblTH8KJjy0FiXXcRsXXa-32-16.png" alt="">'}}j?b.itemName.length>23&&(b.itemName=b.itemName.replace(/^(.{23}).*$/,"$1")):b.itemName.length>26&&(b.itemName=b.itemName.replace(/^(.{26}).*$/,"$1")),F="",B="<div class='desc'><a class='side-item' target='_blank' href='"+b.url+"' >"+j+b.itemName+"</a></div>",_=0!=b.promotionPrice?'<p class="tuijian-price"><span class="tuijian-light"><b class="yen">&yen;</b><b class="price">'+b.promotionPrice+'</b></span><span class="old-price"><b class="yen">&nbsp;&yen;</b><b class="price">'+b.price+"</b></span>"+M+"</p>":"<p class='tuijian-price tuijian-light'><b class='yen'>&yen;</b><b class='price'>"+b.price+"</b></p>",v="<li><div class='item'><div class='pic'><a class='side-item' target='_blank' href='"+b.url+"'><img title='"+b.itemName+"' src='"+b.pic+"'/></a></div>"+B+_+F+"</div></li>",k+=v}k+="</ul></div>"}k+="</div></div></div>",w.html(k),r<=1&&(m.one(".prev","#detail-recommend-bought").hide(),m.one(".next","#detail-recommend-bought").hide(),m.one(".page_num","#detail-recommend-bought").hide()),x=m.all(".item-list",w),f=m.one("#bought-items-slide",w),y=x.height(),f.height(y),x.height(y),f.css("visibility","visible"),c=new p("#bought-items-slide",{contentClass:"scrollable-panel",pannelClass:"item-list",effect:"fade"}),d.on(m.one(".prev","#detail-recommend-bought"),"click",function(){c.currentTab>0?(c.previous(),m.one(".page_num","#detail-recommend-bought").text(c.currentTab+1+"/"+r)):(c.go(r-1),m.one(".page_num","#detail-recommend-bought").text(r+"/"+r))}),d.on(m.one(".next","#detail-recommend-bought"),"click",function(){c.currentTab<r-1?(c.next(),m.one(".page_num","#detail-recommend-bought").text(c.currentTab+1+"/"+r)):(c.go(0),m.one(".page_num","#detail-recommend-bought").text("1/"+r))})}},jsonp:"callback",jsonpCallback:"detail_recommend_bought"})))}}),new X}var t=l,a=r,n=c,o=m,d=X,p=s;return e=i}(),o=function(e){return e=n}(),t.exports=o});